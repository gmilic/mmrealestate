<script>
  const queryString = window.location.search
  const urlParams = new URLSearchParams(queryString)
  const query = urlParams.get('query')
  if (query) {
    document.getElementById('search-input-value').value = query

    window.fsAttributes = window.fsAttributes || []
    window.fsAttributes.push([
      'cmsfilter',
      (filterInstances) => {
        // Select the input element with attribute querysearch="true"
        const searchInput = document.querySelector('[querysearch="true"]')
        // Dispatch the input event to trigger the filter
        searchInput.dispatchEvent(new Event('input', { bubbles: true }))
        // Click the search submit button
        document.getElementById('search-submit').click()
        const [filterInstance] = filterInstances
      }
    ])
  }
</script>
